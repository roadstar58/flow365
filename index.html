<!DOCTYPE html>
<html lang="ko">
<head>
<meta charset="UTF-8">
<meta name="viewport"
      content="width=device-width, initial-scale=1.0, viewport-fit=cover">
<title>2026 FLOW365 PRO V6-1.2</title>
<link rel="manifest" href="manifest.json">

<style>
:root{
  --header-h: 44px;
  --gap: 4px;
  --month-title: 10px;
  --day-font: 9px;
  --memo-font: 8px;
  --pad: 6px;
}

html,body{
  margin:0;
  padding:0;
  height:100%;
  background:#fff;
  font-family:Arial;
  overflow:hidden;
}

h1{
  height:var(--header-h);
  line-height:var(--header-h);
  margin:0;
  text-align:center;
  font-size:16px;
  border-bottom:1px solid rgba(0,0,0,.1);
}

.wrapper{
  height:calc(100vh - var(--header-h));
  padding:var(--pad);
  box-sizing:border-box;
}

.calendar{
  height:100%;
  display:grid;
  gap:var(--gap);
  grid-template-columns:repeat(4,1fr);
  grid-template-rows:repeat(3,1fr);
}

/* ✅ 핵심 수정: month 전체를 flex column으로 바꿔서 남는 공간을 주요사항이 가져가게 */
.month{
  display:flex;
  flex-direction:column;
  border-radius:8px;
  overflow:hidden;
}

.title{
  font-size:var(--month-title);
  font-weight:bold;
  padding:3px 5px;
  color:#fff;
}

.days{
  display:grid;
  grid-template-columns:repeat(7,1fr);
  grid-template-rows:repeat(5,1fr);
  flex:1; /* 날짜 영역이 먼저 채움 */
}

.day{
  border:1px solid rgba(0,0,0,.05);
  padding:2px;
  display:flex;
  flex-direction:column;
  font-size:var(--day-font);
}

.memo{
  font-size:var(--memo-font);
  overflow:hidden;
  display:-webkit-box;
  -webkit-line-clamp:3;
  -webkit-box-orient:vertical;
  white-space:pre-wrap;
}

.major{
  padding:4px;
  font-size:var(--memo-font);
  border-top:1px solid rgba(0,0,0,.06);
  background:rgba(255,255,255,.8);
  flex-grow:1; /* ✅ 남는 공간 자동 배분 */
  overflow:hidden;
  cursor:pointer;
}

@media(orientation:landscape){
  .calendar{
    grid-template-columns:repeat(6,1fr);
    grid-template-rows:repeat(2,1fr);
  }
}
</style>
</head>

<body>
<h1>2026 FLOW365 PRO V6-1.2</h1>
<div class="wrapper">
  <div class="calendar" id="calendar"></div>
</div>

<script>
const year=2026;
const colors=["#FF6B6B","#FF9F43","#FFD93D","#6BCB77","#4D96FF","#6A67CE","#C65D7B","#00C9A7","#845EC2","#FF9671","#2C73D2","#008E9B"];
const cal=document.getElementById("calendar");

let memos=JSON.parse(localStorage.getItem("flow365_memo")||"{}");
let majorMemo=JSON.parse(localStorage.getItem("flow365_month")||"{}");

for(let m=0;m<12;m++){
  let block=document.createElement("div");
  block.className="month";
  block.style.background=colors[m]+"22";

  let title=document.createElement("div");
  title.className="title";
  title.style.background=colors[m];
  title.innerText=(m+1)+"월";
  block.appendChild(title);

  let daysWrap=document.createElement("div");
  daysWrap.className="days";

  let last=new Date(year,m+1,0).getDate();

  for(let d=1;d<=last;d++){
    let cell=document.createElement("div");
    cell.className="day";

    let key=year+"-"+(m+1)+"-"+d;

    let memoDiv=document.createElement("div");
    memoDiv.className="memo";
    memoDiv.textContent=memos[key]?.text||memos[key]||"";

    cell.innerHTML="<b>"+d+"</b>";
    cell.appendChild(memoDiv);
    daysWrap.appendChild(cell);
  }

  while(daysWrap.children.length<35){
    daysWrap.appendChild(document.createElement("div"));
  }

  block.appendChild(daysWrap);

  let major=document.createElement("div");
  major.className="major";
  major.textContent="주요사항: "+(majorMemo[m]||"");
  block.appendChild(major);

  cal.appendChild(block);
}
</script>

</body>
</html>
